<p id="notice"><%= notice %></p>

<h1>Listing Hooks</h1>

<table class="table" cellspacing="0">
  <thead>
    <tr>
      <th>Url</th>
      <th># Calls</th>
      <th>Last Call</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @hooks.each do |hook| %>
      <tr>
        <td><%= link_to hook.url, hook.url + '?inspect', target: '_blank' %></td>
        <td><%= link_to_if !hook.calls.size.zero?, hook.calls.size, calls_path(hook_id: hook.id) %></td>
        <td>
          <% if hook.last_call %>
            <%= link_to hook.last_call do %>
              <%= hook.last_call.created_at %> <%= hook.last_call.status %>
            <% end %>
          <% else %>
            none
          <% end %>
        </td>
        <td><%= link_to 'Show', hook %></td>
        <td><%= link_to 'Edit', edit_hook_path(hook) %></td>
        <td><%= link_to 'Destroy', hook, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Hook', new_hook_path %>
